<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>To-Do List</title>

  <!-- Bootstrap Icons CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="add">
    <div class="left-section">
      <label for="task">Enter task:</label>
      <input type="text" id="task" />
      <button id="btn">Add</button>
    </div>
    <div id="count">0/0</div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Task</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="tablebody"></tbody>
  </table>

  <script>
    let total = 0;
    let done = 0;

    const countDiv = document.getElementById("count");

    function updateCount() {
      countDiv.textContent = `${done}/${total}`;
    }

    document.getElementById("btn").addEventListener("click", function () {
      let val = document.getElementById("task").value.trim();
      if (val === "") return;

      total++;
      updateCount();

      let x = document.getElementById("tablebody");
      let row = document.createElement("tr");
      let cell = document.createElement("td");
      let span = document.createElement("span");
      span.textContent = val;

      cell.appendChild(span);

      let actioncell = document.createElement("td");

      // Done button
      let doneBtn = document.createElement("button");
      doneBtn.innerHTML = `<i class="bi bi-check2-circle done-btn"></i>`;
      doneBtn.onclick = function () {
        span.classList.toggle("completed");
        if (span.classList.contains("completed")) done++;
        else done--;
        updateCount();
      };

      // Edit button
      let editBtn = document.createElement("button");
      editBtn.innerHTML = `<i class="bi bi-pencil-square edit-btn"></i>`;
      editBtn.onclick = function () {
        let input = document.createElement("input");
        input.type = "text";
        input.value = span.textContent;
        input.className = "edit-input";

        input.onblur = function () {
          if (input.value.trim() !== "") {
            span.textContent = input.value.trim();
          }
          cell.replaceChild(span, input);
        };

        input.onkeydown = function (e) {
          if (e.key === "Enter") {
            input.blur();
          }
        };

        cell.replaceChild(input, span);
        input.focus();
      };

      // Delete button
      let deleteBtn = document.createElement("button");
      deleteBtn.innerHTML = `<i class="bi bi-trash delete-btn"></i>`;
      deleteBtn.onclick = function () {
        if (span.classList.contains("completed")) done--;
        total--;
        updateCount();
        x.removeChild(row);
      };

      actioncell.append(editBtn, deleteBtn, doneBtn);
      row.append(cell, actioncell);
      x.append(row);

      document.getElementById("task").value = "";
    });
  </script>
</body>
</html>
